services:
  speedtest:
    image: ghcr.io/r4vk/speedtest:latest
    container_name: r4vk-speedtest
    restart: unless-stopped
    ports:
      - "8000:8000"
    volumes:
      - speedtest-data:/data
      - /etc/localtime:/etc/localtime:ro
    environment:
      - TZ=Europe/Warsaw
      # Optional anonymous telemetry endpoint (opt-out in UI):
      # - TELEMETRY_ENDPOINT=https://your-worker.example.workers.dev/collect
      # - TELEMETRY_AUTH_TOKEN=replace-with-ingest-token
      # - TELEMETRY_DEFAULT_ENABLED=true
      # - SPEEDTEST_URL=https://example.com/largefile.iso
      # - SPEEDTEST_INTERVAL_SECONDS=900
      # - CONNECT_TARGET=google.com
      # SMTP notifications (uncomment and fill to enable):
      # - SMTP_HOST=smtp.gmail.com
      # - SMTP_PORT=587
      # - SMTP_USER=your-email@gmail.com
      # - SMTP_PASSWORD=your-app-password
      # - SMTP_FROM=your-email@gmail.com
      # - SMTP_TO=recipient@example.com
      # - SMTP_USE_TLS=true

volumes:
  speedtest-data:
